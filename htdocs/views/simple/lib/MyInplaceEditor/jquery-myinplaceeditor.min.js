(function(d){d.fn.MyInplaceEditor=function(h){var i=d.extend({},d.fn.MyInplaceEditor.settings,h,{actionTarget:this});i.actionTarget.off("click.myinplaceeditor").on("click.myinplaceeditor",function(){g(i)});return this};d.MyInplaceEditor=function(h){return g(d.extend({},d.fn.MyInplaceEditor.settings,h,{actionTarget:{}}))};function c(h){if(h.preventDefault){h.preventDefault()}else{h.returnValue=false}if(h.stopPropagation){h.stopPropagation()}}function a(k){var j=k.actionTarget;var l=f(k);var h=typeof k.defaultValue==="function"?k.defaultValue.call(j):k.defaultValue;var i=d("<input/>").addClass(k.inputClass).on("click",function(m){c(m);d(this).focus()}).off("dblclick").on("dblclick",c);if(h){i.val(h)}return i.keydown(function(m){if(m.keyCode==13){c(m);var n=d(this).val();l.data("input-finished",true);b(k).closest(":focusable").focus();if(k.checkAllowedValue(n,h)){e(k.changeEvent,j,{value:n});e(k.finalEvent,j,true)}else{e(k.cancelEvent,j);e(k.finalEvent,j,false)}}else{if(m.keyCode==27){c(m);l.data("input-canceled",true);b(k).closest(":focusable").focus();e(k.cancelEvent,j);e(k.finalEvent,j)}}}).focusout(function(){b(k);e(k.cancelEvent,j);e(k.finalEvent,j,false)})}function f(h){if(h.editorTarget===null){return h.actionTarget}return typeof h.editorTarget==="function"?h.editorTarget.call(h.actionTarget):h.editorTarget}function g(h){var i=f(h);if(h.actionInterceptor!==null&&h.actionInterceptor.call(h.actionTarget)){return i}i.wrapInner(d("<div/>").addClass(h.wrapperClass).hide());e(h.beforeEvent,h.actionTarget);return i.prepend(a(h)).find(":focusable").focus().select()}function b(h){var j=f(h);j.find("."+h.inputClass).remove();var i=j.find("."+h.wrapperClass);i.children().unwrap();return j}function e(j,i,h){if(j){j.call(i,h)}}d.fn.MyInplaceEditor.checkAllowedValue=function(i,h){return(i!=="")&&(!h||h!=i)};d.fn.MyInplaceEditor.settings={actionInterceptor:null,editorTarget:null,defaultValue:null,checkAllowedValue:d.fn.MyInplaceEditor.checkAllowedValue,beforeEvent:null,changeEvent:null,cancelEvent:null,finalEvent:null,inputClass:"myinplaceeditor-input",wrapperClass:"myinplaceeditor-hidden"}}(jQuery));