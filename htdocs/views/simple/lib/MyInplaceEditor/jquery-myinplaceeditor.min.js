(function(d){d.fn.MyInplaceEditor=function(h){var i=d.extend({},d.fn.MyInplaceEditor.settings,h,{actionTarget:this});i.actionTarget.off("click.myinplaceeditor").on("click.myinplaceeditor",function(){g(i)});return this};d.MyInplaceEditor=function(h){g(d.exend({},d.fn.MyInplaceEditor.settings,h,{actionTarget:{}}))};function c(h){if(h.preventDefault){h.preventDefault()}else{h.returnValue=false}if(h.stopPropagation){h.stopPropagation()}}function a(k){var j=k.actionTarget;var l=f(k);var h=typeof k.defaultValue==="function"?k.defaultValue.call(j):k.defaultValue;var i=d("<input/>").addClass(k.inputClass).on("click",function(m){c(m);d(this).focus()}).off("dblclick").on("dblclick",c);if(h){i.val(h)}return i.keydown(function(m){if(m.keyCode==13){c(m);var n=d(this).val();b(j,l).closest(":focusable").focus();if(k.checkAllowedValue(n,h)){e(k.changeEvent,j,{value:n})}e(k.finalEvent,j)}else{if(m.keyCode==27){c(m);b(j,l).closest(":focusable").focus();e(k.finalEvent,j)}}}).focusout(function(){b(j,l)})}function f(h){if(h.editorTarget===null){return h.actionTarget}return typeof h.editorTarget==="function"?h.editorTarget.call(h.actionTarget):h.editorTarget}function g(h){var i=f(h);if(!h.actionInterceptor||h.actionInterceptor.call(h.actionTarget)){return i}h.actionTarget.data("orig-html",i.html());e(h.beforeEvent,h.actionTarget);return i.html(a(h)).find(":focusable").focus()}function b(h,i){i.html(h.data("orig-html"));h.removeData("orig-html");return i}function e(j,i,h){if(j){j.call(i,h)}}d.fn.MyInplaceEditor.checkAllowedValue=function(i,h){return(i!=="")&&(!h||h!=i)};d.fn.MyInplaceEditor.settings={actionInterceptor:null,editorTarget:null,defaultValue:null,checkAllowedValue:d.fn.MyInplaceEditor.checkAllowedValue,beforeEvent:null,changeEvent:null,finalEvent:null,inputClass:"myinplaceditor-input"}}(jQuery));