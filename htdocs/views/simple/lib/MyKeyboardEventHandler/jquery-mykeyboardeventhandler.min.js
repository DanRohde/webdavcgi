(function(a){a.fn.MyKeyboardEventHandler=function(d){var e=a.extend({namespace:"mykeyboardeventhandler"},d);this.off("keyup."+e.namespace).on("keyup."+e.namespace,b);function c(f){if(f.preventDefault){f.preventDefault()}else{f.returnValue=false}if(f.stopPropagation){f.stopPropagation()}}function b(g){if(g.target!=this){return}c(g);var f=a(this);var h;switch(g.keyCode){case 32:case 13:if(f.data("input-finished")){f.removeData("input-finished");return}f.trigger("click",{origEvent:g});break;case 27:if(f.data("input-canceled")){f.removeData("input-canceled");return}f.closest(".dropdown-menu").hide();f.closest("ul.popup:visible").hide();a("ul.popup:visible",f).hide();f.closest(":focusable").focus();break;case 34:case 35:f.nextAll(":not([tabindex=-1]):focusable:last").focus();break;case 33:case 36:f.prevAll(":not([tabindex=-1]):focusable:last").focus();break;case 37:if((h=f.prevAll(":not([tabindex=-1]):focusable")).length>0){h.first().focus()}else{f.parents(":focusable").prevAll(":not([tabindex=-1]):focusable:first").focus()}break;case 38:if((h=f.prevAll(":not([tabindex=-1]):focusable")).length>0){h.first().focus()}else{f.parents(":not([tabindex=-1]):focusable").first().focus()}break;case 39:if((h=f.nextAll(":not([tabindex=-1]):focusable")).length>0){h.first().focus()}else{f.parents(":focusable").nextAll(":not([tabindex=-1]):focusable:first").focus()}break;case 40:if((h=a(":not([tabindex=-1]):focusable",f)).length>0){h.first().focus()}else{f.nextAll(":not([tabindex=-1]):focusable:first").focus()}break}}return this}}(jQuery));