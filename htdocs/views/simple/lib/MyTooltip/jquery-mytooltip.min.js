(function(a){a.fn.MyTooltip=function(x,v,r){var o=a("body");var k=a(window);var e,h,j;if(!o.data("tooltip")){h=a("<div/>").addClass("tooltip-content");j=a("<div/>").addClass("tooltip-ta");e=a("<div/>").addClass("tooltip").append(h,[a("<div/>").addClass("tooltip-help").attr("tabindex",0).on("click",f),j]).appendTo(a("body")).hide();o.data("tooltip",e)}else{e=o.data("tooltip");h=a(".tooltip-content",e);j=a(".tooltip-ta",e)}o.off("click.tooltip mouseover.tooltip").on("click.tooltip mouseover.tooltip",function(w){c();e.hide()});function f(w){console.log(e.data("help"))}function c(){window.clearTimeout(o.data("tttimeout"))}function m(y,w){c();e.hide();o.data("tttimeout",window.setTimeout(function(){l(y,w)},x))}function g(w,y){o.data("tttimeout",window.setTimeout(function(){e.hide()},w))}function i(w){if(w.preventDefault){w.preventDefault()}else{w.returnValue=false}if(w.stopPropagation){w.stopPropagation()}}function l(D,y){c();var w=D.type=="focus";var C=w?y.offset().left+y.outerWidth()-15:D.pageX-5;var B=w?y.offset().top+y.outerHeight()+10:D.pageY+20;var A=Math.max(Math.floor(k.width()/2),50);var z=Math.max(Math.floor(k.height()/2),10);e.removeClass("tooltip-left tooltip-right tooltip-top tooltip-bottom");if(C+e.outerWidth()>k.width()){C=(w?y.offset().left+y.outerWidth():D.pageX)-e.outerWidth()-Math.min(y.outerWidth(),15);e.addClass("tooltip-right")}else{e.addClass("tooltip-left")}if(B+e.outerHeight()>k.height()){B=(w?y.offset().top:D.pageY)-e.outerHeight()-10;e.addClass("tooltip-top")}else{e.addClass("tooltip-bottom")}e.css({left:C+"px",top:B+"px","max-height":z+"px","max-width":A+"px"});e.toggle(h.text()!="");g(r||7000,y)}function n(w){return w.attr("data-tooltip-block")}function d(w){w.parents("[data-tooltip], [title]").each(function(y,z){a(z).attr("data-tooltip-block",true)});return w}function u(w){w.parents("[data-tooltip-block]").removeAttr("data-tooltip-block")}function t(z){var y=a(this);s(y);if(n(y)){return}d(y);if(y.data("htmltooltip")){h.html(y.data("htmltooltip"))}else{h.text(y.attr("data-tooltip"))}var w=y.data("help")||y.parents("[data-help]:first").data("help");e.toggleClass("help",w!=undefined).data("help",w);if(w!=undefined){v=3000}if(x){m(z,y)}else{l(z,y)}}function p(z,w){var y=a(this);s(y);if(n(y)){return}if(e.is(":visible")&&!x){l(z,y)}else{m(z,y)}}function b(y,w){c();g(v||500,w);u(a(this));h.text("")}function s(w){return w.attr("data-tooltip",w.attr("title")!=undefined?w.attr("title"):w.attr("data-tooltip")).removeAttr("title")}function q(w){w.off(".tooltip").on("mouseenter.tooltip focus.tooltip",t).on("mouseleave.tooltip blur.tooltip",b).on("mousemove.tooltip",p)}q(this.find("[title]"));if(this.attr("title")){q(this)}return this}}(jQuery));