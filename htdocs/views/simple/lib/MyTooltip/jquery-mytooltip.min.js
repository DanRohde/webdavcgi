(function(a){a.fn.MyTooltip=function(u,t,p){var m=a("body");var i=a(window);var e;if(!m.data("tooltip")){e=a("<div/>").addClass("tooltip").appendTo(a("body")).hide();m.data("tooltip",e)}else{e=m.data("tooltip")}m.off("click.tooltip").on("click.tooltip",function(){c();e.hide()});e.off("mouseover.tooltip").on("mouseover.tooltip",function(v){g(v);c();e.hide()});function c(){window.clearTimeout(m.data("tttimeout"))}function k(w,v){c();e.hide();m.data("tttimeout",window.setTimeout(function(){j(w,v)},u))}function f(v,w){m.data("tttimeout",window.setTimeout(function(){e.hide()},v))}function g(v){if(v.preventDefault){v.preventDefault()}else{v.returnValue=false}if(v.stopPropagation){v.stopPropagation()}}function j(B,w){c();var v=B.type=="focus";var A=(v?w.offset().left:B.pageX)-Math.floor(e.outerWidth()/2);var z=w.offset().top-e.outerHeight()-4;var y=Math.max(Math.floor(i.width()/2),50);var x=Math.max(Math.floor(i.height()/2),10);if(A-i.scrollLeft()<0){A=4}if(A+e.outerWidth()>i.width()){A=i.width()-e.outerWidth()-4}if(z-i.scrollTop()<0){z=Math.floor(w.offset().top+w.outerHeight()+4)}if(!v&&Math.abs(B.pageY-z)>50){z=Math.max(B.pageY-e.outerHeight()-14,0)}e.css({left:A+"px",top:z+"px","max-height":x+"px","max-width":y+"px"});e.toggle(e.text()!=="");f(p||7000,w)}function l(v){return v.attr("data-tooltip-block")=="true"}function d(v){v.parents("[data-tooltip], [title]").each(function(w,x){a(x).attr("data-tooltip-block","true")});return v}function s(v){v.parents("[data-tooltip-block]").removeAttr("data-tooltip-block")}function r(x,v){var w=a(this);q(w);if(l(w)){return}d(w);if(w.data("htmltooltip")){e.html(w.data("htmltooltip"))}else{e.text(w.attr("data-tooltip"))}if(u){k(x,w)}else{j(x,w)}}function n(x,v){var w=a(this);q(w);if(l(w)){return}if(e.is(":visible")&&!u){j(x,w)}else{k(x,w)}}function b(w,v){c();f(t||500,v);s(a(this))}function q(v){return v.attr("data-tooltip",v.attr("title")!==undefined?v.attr("title"):v.attr("data-tooltip")).removeAttr("title")}function h(v){return v.off(".tooltip")}function o(v){h(v).on("mouseover.tooltip focus.tooltip",r).on("mouseout.tooltip blur.tooltip",b).on("mousemove.tooltip",n)}o(this.find("[title]"));if(this.attr("title")){o(this)}return this}}(jQuery));