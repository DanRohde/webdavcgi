$(document).ready(function(){var a=$("body");$("#flt").on("fileListChanged",function(){var g=a.data("history")||b()||new Array();var f=$("#fileList").data("uri")||window.location.pathname;var e=-1;if((e=g.indexOf(f))>-1){g.splice(e,1)}if(g.length>=10){g.shift()}g.push(f);a.data("history",g);a.trigger("history.changed",{history:g})});a.on("history.changed",function(f,g){d(g.history);c(g.history)});function d(e){ToolBox.cookie("history",JSON.stringify(e),1)}function b(){return ToolBox.cookie("history")?$.parseJSON(ToolBox.cookie("history")):new Array()}function c(j){var h=$(".history-popup .subpopupmenu");h.empty();var e=$("#fileList").data("uri");for(var f=j.length;f--;f>=0){var k=j[f];if(k.length>34){k="/..."+j[f].substr(-30)}var g=$("<li/>").addClass("action changeUri history icon category-folder suffix-folder").attr("title",decodeURIComponent(j[f])).data("uri",j[f]).html(decodeURIComponent(k));if(j[f]==e){g.addClass("disabled")}h.append(g)}h.find(".action.changeUri").click(function(){ToolBox.changeUri($(this).data("uri"))});h.MyTooltip(250)}});