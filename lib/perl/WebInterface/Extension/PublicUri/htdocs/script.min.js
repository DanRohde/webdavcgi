$(document).ready(function(){$("body").on("fileActionEvent",j);function j(k,m){var l=$(m.obj);var n=l.closest("tr");if(l.hasClass("puri")){c(n)}else{if(l.hasClass("depuri")){d(n)}else{if(l.hasClass("spuri")){e(n)}}}}function c(k){k.fadeTo("slow",0.5);ToolBox.confirmDialog($("#purifileconfirm").html().replace(/%s/,ToolBox.simpleEscape(k.attr("data-file"))),{confirm:function(){var l=k.attr("data-file");var m=$.MyPost($("#fileList").attr("data-uri"),{puri:"yes",file:l},function(n){if(n.error){ToolBox.updateFileList()}else{k.removeClass("unshared").addClass("shared");if($(".publicuri",k).length>0){ToolBox.refreshFileListEntry(l)}}h(n)});ToolBox.renderAbortDialog(m)},cancel:function(){k.fadeTo("fast",1)}})}function e(m){var k=m.attr("data-file");var l=$.MyPost($("#fileList").attr("data-uri"),{spuri:"yes",file:k},function(n){if(n.error){ToolBox.updateFileList()}h(n)});ToolBox.renderAbortDialog(l)}function d(k){k.fadeTo("slow",0.5);ToolBox.confirmDialog($("#depurifileconfirm").html().replace(/%s/,ToolBox.simpleEscape(k.attr("data-file"))),{confirm:function(){var l=k.attr("data-file");var m=$.MyPost($("#fileList").attr("data-uri"),{depuri:"yes",file:l},function(n){if(n.error){ToolBox.updateFileList()}else{k.removeClass("shared").addClass("unshared").attr("data-puri","no");if($(".publicuri",k).length>0){ToolBox.refreshFileListEntry(l)}}ToolBox.handleJSONResponse(n)});ToolBox.renderAbortDialog(m)},cancel:function(){k.fadeTo("fast",1)}})}function a(k,l){console.log("confirm["+k+"]: "+l);noty({text:l,type:k,layout:"topCenter",timeout:30000,closeWith:["button"]})}function i(k){a("confirmation",k)}function b(k){a("confirmation",k)}function f(k){a("confirmation",k)}function g(k,l){$("#fileform").attr("action",$("#fileList").attr("data-uri"));$("#fileform #fileaction").attr("name",k).attr("value","yes");$("#fileform #filename").attr("value",l);$("#fileform").submit()}function h(k){if(k.error){i(k.error)}if(k.warn){f(k.warn)}if(k.message){b(k.message)}if(k.quicknav){$("#quicknav").html(k.quicknav);$("#quicknav a").click(function(l){preventDefault(l);changeUri($(this).attr("href"))})}}});