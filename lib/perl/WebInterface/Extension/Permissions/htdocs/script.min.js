$(document).ready(function(){$(".action.permissions").click(function(){if($(this).hasClass("disabled")){return}var a=this;var b=ToolBox.getSelectedFiles(a);$(".action.permissions").addClass("disabled");var d=$("#fileList").attr("data-uri");var c=$(this).attr("data-template");$.MyPost(d,{ajax:"getPermissionsDialog",template:c,files:b},function(e){var f=$(e);$("form",f).submit(function(){var g=$(this);ToolBox.confirmDialog($("#changepermconfirm").html(),{confirm:function(){f.dialog("close");var i=ToolBox.blockPage();var h=$.post(d,g.serialize()+"&"+$.param({files:b}),function(j){ToolBox.handleJSONResponse(j);i.remove();ToolBox.updateFileList()});ToolBox.renderAbortDialog(h)}});return false});$("input[name=changeperm]",f).button();f.dialog({modal:true,width:"auto",height:"auto",dialogClass:"permissions",closeText:$("#close").html(),close:function(){$(".action.permissions").removeClass("disabled");f.remove()}}).show()})})});