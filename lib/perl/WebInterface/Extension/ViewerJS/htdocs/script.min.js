$(document).ready(function(){$("body").on("fileActionEvent",function(c,d){function a(g){$("iframe",g).attr("width",$(window).width()-40).attr("height",$(window).height()-Math.max($(".close.button",g).outerHeight(),50))}function b(g){$("#main").show();$(window).off("popstate.viewerjs unload.viewerjs beforeunload.viewerjs resize.viewerjs");if(g&&g.remove){g.remove()}}if(d.obj.hasClass("viewerjs")){var f=ToolBox.blockPage();var e=$.get(window.location.pathname,{action:"viewerjs",file:d.file},function(g){f.remove();$("#main").hide();var h=$(g);$(".close.button",h).button().click(function(){b(h)});$(window).off("popstate.viewerjs unload.viewerjs beforeunload.viewerjs").on("popstate.viewerjs unload.viewerjs beforeunload.viewerjs",function(){b(h)}).off("resize.viewerjs").on("resize.viewerjs",function(){a(h)});a(h);h.appendTo($("body"))});ToolBox.renderAbortDialog(e)}})});