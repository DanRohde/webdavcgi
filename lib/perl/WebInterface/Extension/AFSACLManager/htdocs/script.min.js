(function(c){c("body").on("fileActionEvent",function(d,e){if(e.obj.hasClass("afsaclmanager")){a.call(this,d)}});c(".action.afsaclmanager").click(a);function a(){if(c(this).hasClass("disabled")){return false}c(".action.afsaclmanager").addClass("disabled");var f=c("#fileList").attr("data-uri");var e=c("#fileList tr.selected[data-type='dir']");var d=c(this).attr("data-template");if(e.length>0){f=ToolBox.concatUri(f,encodeURIComponent(ToolBox.stripSlash(c(e[0]).attr("data-file")))+"/")}var g=c.MyPost(f,{ajax:"getAFSACLManager",template:d},function(h){var i=c(h);b(i);("#afasaclmanager",i).submit(function(){c("input[type='submit']",i).attr("disabled","disable");g=c.MyPost(f,c("#afsaclmanager",i).serialize(),function(j){ToolBox.handleJSONResponse(j);c.MyPost(f,{ajax:"getAFSACLManager",template:d},function(k){i.html(c(k).unwrap());b(i)})});ToolBox.renderAbortDialog(g);return false});i.dialog({modal:true,width:"auto",height:"auto",dialogClass:"afsaclmanager",closeText:c("#close").html(),close:function(){c(".action.afsaclmanager").removeClass("disabled");i.remove()}}).show()});ToolBox.renderAbortDialog(g);return true;5}function b(d){c("input[readonly='readonly']",d).click(function(f){c.MyPreventDefault(f)});c("input.afsaclmanager.add",d).autocomplete({minLength:4,source:function(f,e){c.MyPost(c("#fileList").data("uri"),{ajax:"searchAFSUserOrGroupEntry",term:f.term},function(g){e(g.result?g.result:[])},true)}});c("input[name=saveafsacl]",d).button()}}(jQuery));