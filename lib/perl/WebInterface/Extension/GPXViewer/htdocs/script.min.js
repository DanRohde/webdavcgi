$(document).ready(function(){$("body").on("fileActionEvent",function(a,b){if(b.obj.hasClass("gpxviewer")){var d=ToolBox.blockPage();var c=$.post(window.location.href,{action:"gpxviewer",file:b.file},function(e){var f=$(e);d.remove();f.dialog({width:"auto",height:"auto",modal:true,dialogClass:f.attr("class"),closeText:$("#close").html(),open:function(){initGPXViewer()},resize:function(){$("#gpxviewermap").css({width:f.width(),height:f.height()});triggerGPXViewerResize()},close:function(){finalizeGPXViewer();f.dialog("destroy")}})});ToolBox.renderAbortDialog(c)}})});