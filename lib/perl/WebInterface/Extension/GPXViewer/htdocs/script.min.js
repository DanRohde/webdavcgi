$(document).ready(function(){function a(b){var d=ToolBox.blockPage();var c=$.post(window.location.href,{action:"gpxviewer",file:b},function(e){var f=$(e);d.remove();f.dialog({width:"auto",height:"auto",modal:true,dialogClass:f.attr("class"),closeText:$("#close").html(),open:function(){initGPXViewer()},resize:function(){$("#gpxviewermap").css({width:f.width(),height:f.height()-$("#gpxviewerstats",f).height()});triggerGPXViewerResize()},close:function(){finalizeGPXViewer();f.dialog("destroy")}})});ToolBox.renderAbortDialog(c)}$("body").on("fileActionEvent",function(b,c){if(c.obj.hasClass("gpxviewer")){a(c.file)}});$("#flt").on("fileListChanged",function(){$("#fileList .suffix-gpx.isempty-no.isreadable-yes.is-file .filename a").off("click").on("click",function(c){var b=$(this);ToolBox.preventDefault(c);if(b.closest("div.filename").is(".ui-draggable-dragging")){return}a(b.closest("tr").data("file"))})})});