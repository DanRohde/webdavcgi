$(document).ready(function(){$("body").on("fileActionEvent",function(b,c){if(c.obj.hasClass("disabled")){return}if(!c.obj.hasClass("diff")){return}var e=ToolBox.blockPage();function a(f){e.remove();if(f.error){noty({text:f.error,type:"error",layout:"topCenter",timeout:30000})}else{var g=$(f.content);function j(){$(".diff.raw",g).button().click(function(){$(g).html($(f.raw));j()});$(".diff.formatted",g).button().click(function(){$(g).html($(f.content));j()});$(".diff.swapfiles",g).button().click(function(){g.dialog("close");e=ToolBox.blockPage();var k=$.post(window.location.pathname,{action:"diff",files:new Array($(this).data("file2"),$(this).data("file1"))},a);ToolBox.renderAbortDialog(k)})}var i=$(window).width()-200;var h=$(window).height()-200;g.css({"max-width":i+"px","max-height":h+"px",overflow:"auto"});g.dialog({modal:true,width:"auto",height:"auto",maxWidth:i,maxHeight:h,resizeStart:function(){var l=$(window).width()-200;var k=$(window).height()-200;g.css({"max-width":l+"px","max-height":k+"px",overflow:"auto"});g.dialog("option","maxWidth",l);g.dialog("option","maxHeight",k)}});j()}}var d=$.post(window.location.pathname,{action:"diff",files:c.selected},a);ToolBox.renderAbortDialog(d)});$(".action.diff,.listaction.diff").addClass("disabled");$("#flt").on("fileListSelChanged",function(){if(!$(".action.diff,.listaction.diff").hasClass("disabled")&&$("#fileList tr.selected").length!=2){$(".action.diff,.listaction.diff").addClass("disabled")}})});